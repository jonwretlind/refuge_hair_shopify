
<div id="ReviewsSwiper" class="swiper-container swiper-container-initialized swiper-container-horizontal">
  <button type="button" class="slider-button slider-button--prev left">{% render 'icon-caret' %}</button>
    <div class="swiper-wrapper">
        <div  class="fifty-quote__slide swiper-slide swiper-slide-active index-1" >
            <div  class="fifty-quote__slide-inner flex flex-column flex-align-center">
                <a  href="/products/hydrate-balance" class="fifty-quote__slide-link">
                    <figure  class="fifty-quote__slide-image"><img  alt="HYDRATE + BALANCE 3-STEP HAIR CARE SYSTEM" data-src="//cdn.shopify.com/s/files/1/2380/1623/files/HBMenu400x400.png?v=1619636298" src="//cdn.shopify.com/s/files/1/2380/1623/files/HBMenu400x400.png?v=1619636298" lazy="loaded"></figure>
                </a>
                <figure  class="fifty-quote__slide-figure flex flex-column flex-align-center color-black"><span  class="fifty-quote__slide-quotemark">“</span>
                    <blockquote  class="fifty-quote__slide-quote">
                        <p>Being a full time model requires a lot of travel which keeps me out of the salon longer than I’d like to be. But thanks to Refuge and their amazing <a href="/products/hydrate-balance" title="HYDRATE + BALANCE 3-STEP HAIR CARE SYSTEM">Hydrate + Balance</a> system, combined with adorable packaging, I’m able to keep my curls hydrated and defined everywhere I go!<br><br><a href="https://www.instagram.com/sagetheworld" target="_blank" title="https://www.instagram.com/sagetheworld">@sagetheworld</a></p>
                    </blockquote><span  class="fifty-quote__slide-quotemark">”</span>
                    <figcaption  class="fifty-quote__slide-caption"><cite  class="fifty-quote__slide-cite">- Sage W</cite></figcaption>
                </figure>
            </div>
        </div>
        <div  class="fifty-quote__slide swiper-slide swiper-slide-next index-2" >
            <div  class="fifty-quote__slide-inner flex flex-column flex-align-center">
                <a  href="/products/nourish-grow" class="fifty-quote__slide-link">
                    <figure  class="fifty-quote__slide-image"><img  alt="NOURISH + GROW 3-STEP HAIR CARE SYSTEM" data-src="//cdn.shopify.com/s/files/1/2380/1623/files/NGMenu400x400.png?v=1619636329" src="//cdn.shopify.com/s/files/1/2380/1623/files/NGMenu400x400.png?v=1619636329" lazy="loaded"></figure>
                </a>
                <figure  class="fifty-quote__slide-figure flex flex-column flex-align-center color-black"><span  class="fifty-quote__slide-quotemark">“</span>
                    <blockquote  class="fifty-quote__slide-quote">
                        <p>It’s my favorite new form of self care! The smell is invigorating, the process is so relaxing, and it leaves my hair so soft and smooth! It’s the only product I trust to repair my dry and damaged locks and it leaves my hair feeling revitalized with that fresh out of the salon look. 10 out of 10 would recommend!<br><br><a href="https://www.instagram.com/jennieleehealth" target="_blank" title="https://www.instagram.com/jennieleehealth">@jennieleehealth</a></p>
                    </blockquote><span  class="fifty-quote__slide-quotemark">”</span>
                    <figcaption  class="fifty-quote__slide-caption"><cite  class="fifty-quote__slide-cite">- Jennie L</cite></figcaption>
                </figure>
            </div>
        </div>
        <div  class="fifty-quote__slide swiper-slide index-3" >
            <div  class="fifty-quote__slide-inner flex flex-column flex-align-center">
                <a  href="/products/repair-protect" class="fifty-quote__slide-link">
                    <figure  class="fifty-quote__slide-image"><img  alt="REPAIR + PROTECT 3-STEP HAIR CARE SYSTEM" data-src="//cdn.shopify.com/s/files/1/2380/1623/files/RPMenu400x400.png?v=1619635910" src="//cdn.shopify.com/s/files/1/2380/1623/files/RPMenu400x400.png?v=1619635910" lazy="loaded"></figure>
                </a>
                <figure  class="fifty-quote__slide-figure flex flex-column flex-align-center color-black"><span  class="fifty-quote__slide-quotemark">“</span>
                    <blockquote  class="fifty-quote__slide-quote">
                        <p>As a bottle blonde, I've put my hair through the worst of the worst. Refuge <a href="/products/repair-protect" title="REPAIR + PROTECT 3-STEP HAIR CARE SYSTEM">Repair + Protect</a> has literally saved my hair.<br><br><a href="https://www.instagram.com/paige_chanell/" target="_blank" title="https://www.instagram.com/paige_chanell/">@paige_chanell </a></p>
                    </blockquote><span  class="fifty-quote__slide-quotemark">”</span>
                    <figcaption  class="fifty-quote__slide-caption"><cite  class="fifty-quote__slide-cite">- Paige C</cite></figcaption>
                </figure>
            </div>
        </div>
        <div  class="fifty-quote__slide swiper-slide index-4" >
            <div  class="fifty-quote__slide-inner flex flex-column flex-align-center">
                <a  href="/products/nourish-grow" class="fifty-quote__slide-link">
                    <figure  class="fifty-quote__slide-image"><img  alt="NOURISH + GROW 3-STEP HAIR CARE SYSTEM" data-src="//cdn.shopify.com/s/files/1/2380/1623/files/NGMenu400x400.png?v=1619636329" src="//cdn.shopify.com/s/files/1/2380/1623/files/NGMenu400x400.png?v=1619636329" lazy="loaded"></figure>
                </a>
                <figure  class="fifty-quote__slide-figure flex flex-column flex-align-center color-black"><span  class="fifty-quote__slide-quotemark">“</span>
                    <blockquote  class="fifty-quote__slide-quote">
                        <p>I don’t typically do hair treatments, however when they smell as amazing as refuge hair does I’ll give it a go. The 3-step system was easy and left my hair shiny, silky smooth and luscious feeling, even days after.<br><br><a href="https://www.instagram.com/whitsa_gram/" target="_blank" title="https://www.instagram.com/whitsa_gram/">@whitsa_gram</a></p>
                    </blockquote><span  class="fifty-quote__slide-quotemark">”</span>
                    <figcaption  class="fifty-quote__slide-caption"><cite  class="fifty-quote__slide-cite">- Whitney G</cite></figcaption>
                </figure>
            </div>
        </div>
    </div>
    <button type="button" class="slider-button slider-button--next right">{% render 'icon-caret' %}</button>
  </div>
  <div id="ReviewsPagination" class="product-gallery__pagination swiper-pagination flex flex-justify-center flex-align-end swiper-pagination-clickable swiper-pagination-bullets">
  </div>



    <!-- OVERRIDES AND CUSTOM SCRIPTS -->
    <style rel="stylesheet" type="text/css">

        #ReviewsBlock .multicolumn-list.grid {
          display: flex;
        }
        #ReviewsBlock p {
          font-size: 1.1rem;
          line-height: 1.3rem;
          color: rgba(18,18,18,.7);
        }
        #ReviewsBlock a {
          color: rgba(18,18,18,.7);
          text-decoration: underline;
        }
        #ReviewsBlock a:hover {
          color: rgba(18,18,18,1);
          text-decoration: none;
        }

        #ReviewsSwiper {
          display: grid;
          grid-template-columns: 10% 80% 10%;
        }
        body.mobile #ReviewsSwiper {
          width: 90vw;
        }

        #ReviewsSwiper blockquote {
            font-style: unset;
            color: rgba(18,18,18,1);
            border-left: unset;
            padding: unset;
            text-align: center;
        }
        #ReviewsSwiper .slider-button {
            align-self: center;
            justify-self: center;
        }
        #ReviewsSwiper .slider-button .icon {
          height: 30px;
          opacity: .4;
        }
        #ReviewsSwiper .swiper-slide:not(.swiper-slide-active) {
          display: none;
        }
        #ReviewsSwiper .flex, #ReviewsSwiper .flex > figure {
            display: flex;
        }
        #ReviewsSwiper .flex-column, #ReviewsSwiper .flex-column > figure {
            flex-direction: column;
        }
        #ReviewsSwiper .flex-align-center, #ReviewsSwiper .flex-align-center > figure {
            align-items: center;
        }
        .fifty-quote__slide-image img {
            width: 150px;
            height: unset;
            object-fit: unset;
        }
        .fifty-quote__slide-quote {
            font-size: calc(var(--font-body-scale) * 85%);
            letter-spacing: 0.05187rem;
            line-height: 1.7rem;
            margin: -2.5rem auto 0 auto;
            max-width: 84.87395%;
        }
        .fifty-quote__slide-quotemark {
          font-size: 8rem;
          font-weight: 200;
          line-height: 8.5rem;
        }
        .swiper-wrapper {
            transform: translate3d(0px, 0px, 0px);
            transition-duration: 0ms;
            min-height: 650px;
        }
        .fifty-quote__slide-inner {
          overflow: hidden;
          width: 100%;
        }
        body.mobile #ReviewsSwiper .swiper-slide {
          width: 100% !important;
        }

        figcaption.fifty-quote__slide-caption {
          display: block;
          margin-top: -1em;
        }
        cite.fifty-quote__slide-cite {
          font-size: calc(var(--font-body-scale) * 75%);
          font-weight: 700 !important;
          text-transform: uppercase;
          display: inline-block;
        }
        .multicolumn-card.reviews {
          display: grid;
          grid-template-columns: 1fr 1fr;
        }
        #ReviewsBlock .multicolumn-list__item:only-child {
          max-width: unset;
        }
        #ReviewsBlock .multicolumn-card__info.swiper {
          display: flex;
          justify-content: center;
          flex-direction: column;
        }
        #ReviewsPagination {
          margin: 1rem auto;
          width: 100%;
          display: flex;
          bottom: 0;
        }
        #ReviewsPagination .swiper-pagination-bullet {
            border-top: 2px solid rgba(18,18,18,.4);
            height: 20px;
            width: 100%;
            display: block;
            margin: 0 5px;
        }
        #ReviewsPagination .swiper-pagination-bullet.active {
            border-top: 4px solid rgba(18,18,18,.7);
        }

        body.mobile #ReviewsPagination {
            margin: 1rem auto;
            position: relative;
            width: unset;
            justify-content: center;
        }
    </style>

    <script type="text/javascript">
      jQuery(window).ready(function( $ ) {
          var modelPic = ($('#ModelPic').width())-($('#ModelPic').width()*.2);
          $('.fifty-quote__slide').css("width", modelPic+"px");

          var sliderArr = $('.swiper-slide');
          var sliderLength = sliderArr.length;
          var sliderIdx = 1;
          $('.slider-button.right').on('click tap', function() {
            sliderIdx ++;
            if (sliderIdx > sliderLength) sliderIdx = 1;
            newSlide(sliderArr, sliderIdx);
          });
          $('.slider-button.left').on('click tap', function() {
            sliderIdx --;
            if (sliderIdx < 0 ) sliderIdx = sliderLength;
            newSlide(sliderArr, sliderIdx);
          });



          /* ======= PAGINATION ======= */
            var winWd = $('.multicolumn-card__info').width();
            var viewPort = $(window).width();
            var ct = $('.fifty-quote__slide-figure').length;
            var bulletWd = winWd / ct;
            var pginWidth = $('#ReviewsPagination').width();
            var revWidth = $('#ReviewsSwiper .swiper-wrapper').width();
            for (i=1; i <= ct; i++) {
              if ( i == 1 ) {
                var bullet = "<span class='swiper-pagination-bullet active index-"+ i + "'></span>";
              } else {
                var bullet = "<span class='swiper-pagination-bullet index-"+ i + "'></span>";
              }
              $('.swiper-pagination-bullets').append(bullet);
            }
            console.log('Number of swiper bullets: ' + ct + ", Window Width: " + viewPort);
            if ( viewPort > 768 ) {
              console.log("not small mobile device");
              $('.swiper-pagination').css({
                maxWidth: revWidth+"px",
                left: (revWidth / 2 - pginWidth / 6)
              });
            } else {
              console.log("small mobile device");
              $('.swiper-pagination').css({
                marginLeft: "3rem",
                marginRight: "3rem"
              });
            }
            $('.swiper-pagination-bullet').css({
              maxWidth: bulletWd+"px"
            });

            // Bullets
            $('.swiper-pagination-bullet').click(function() {
              removeActive(sliderArr, bullIdx);
              var classList = $(this).attr("class").split(/\s+/);
              var bullIdx = Number(classList[1].substr(-1, 1));
              addActive(sliderArr, bullIdx)
            });


            // ======= TRANSITION FUNCTIONS =======
            // Swipes todo
            /*
            $('body.mobile .product__media img').swipe(function() {
              console.log("swipe detected");
              removeActive();
              changeSlide(this);
              addActive();
            });
            */
            function removeActive(sl, bullIdx) {
              newSlide(sl, bullIdx);
              chgBullet(bullIdx);
            }
            function addActive(sl, bullIdx) {
              newSlide(sl, bullIdx);
              chgBullet(bullIdx);
            }
            function chgBullet(bullIdx) {
              console.log(bullIdx)
              if (bullIdx < 1) bullIdx = sliderLength;
              $('#ReviewsPagination .swiper-pagination-bullet').removeClass("active");
              $('#ReviewsPagination .swiper-pagination-bullet.index-'+bullIdx).addClass("active");
            }
            function newSlide(sl, idx) {
                sl.animate({
                  opacity: 0
                }, 500, function() {
                  sl.removeClass('swiper-slide-active');
                  sl.eq(idx-1).addClass('swiper-slide-active');
                  sl.eq(idx-1).animate({
                    opacity: 1
                  }, 500)
              });
              chgBullet(idx);
            };
      });
    </script>
